<!DOCTYPE html>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

</head>
<body>
<div class="container">
    <div>
        <h4>비밀번호 찾기</h4>
        <div style="color: #ac2925">
            <center>비밀번호 변경</center>
        </div>
        <hr>
        <form>
            <div class="form-group">
                <label for="orgPw">임시 비밀번호</label>
                <input type="password" id="orgPw" placeholder="발급받은 임시 비밀번호 입력">
            </div>
            <div class="form-group">
                <label for="newPw">변경할 비밀번호</label>
                <input type="password" id="newPw" placeholder="변경할 비밀번호 입력">
            </div>
            <div class="form-group">
                <label for="ReNewPw">변경할 비밀번호 재입력</label>
                <input type="password" id="ReNewPw" placeholder="변경할 비밀번호 다시 한번 입력">
            </div>
            <div><input type="hidden" id="username" th:value="${#authentication.name}" th:name="*{fieldName}"></div>
            <button type="button" id="changePw">변경하기</button>
        </form>
        <hr>
    </div>
    <div>
        <button type="submit" th:onclick="|location.href='@{/main/main}'|">다음에 변경하기</button>
    </div>
</div>
<script type="text/javascript">

    $("#changePw").click(function () {
        let orgPw = $("#orgPw").val();
        let newPw = $("#newPw").val();
        let username = $("#username").val();

        $.ajax({
            type: "POST",
            url: "/account/changePw",
            data: {
                "orgPw": orgPw,
                "newPw": newPw,
                "username": username
            },
            success: function (res) {
                window.location.href = "/";
            }
        })
    })
</script>
</body>
</html>